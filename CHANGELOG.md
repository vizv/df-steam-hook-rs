## 版本变动

### 20241006 汉化预览版

* **实现了通用的查询树，适配了 50.14 版**
* 临时增加了分割逗号进行分段翻译的机制
* 矮人要塞中文翻译词典迁移到了新的查询树
* 提升了性能

### 20240922 汉化预览版

* **添加上下文支持**
* [Windows] 修复了 string collector 导致的闪屏渲染错误的问题和文本匹配不上导致不汉化的问题
* 修复了文本背景色不会被渲染的问题
* 改用《矮人要塞》风格的 .txt 配置文件
* 添加 backtracer 获取当前函数调用链，加速开发和提供上下文支持
* 添加了基于上下文的文本对齐支持
* 添加了标题界面的汉化程序版本号
* 从代码和配置文件中分离了内存地址偏移信息，使用独立的仓库维护
* 统一了受支持版本的配置文件和数据文件
* 允许用户关闭 dfint 旧词典
* 打包时添加了 README 文档和许可证信息
* 对所有受支持的版本在发布时创建通用的压缩包

### 20240915 汉化预览版

* **重写了匹配和翻译的逻辑，为 Windows 添加了 string collector 以解决函数 inline 问题**
* [Windows] 修复了富文本中的键位名称（比如 w、a、s、d 等）无法显示的问题
* [Windows] 修复了选项卡有时在渲染时不被翻译并只显示一半英文的问题
* [Windows] 修复了有些词典中的翻译没有显示的问题
* 修正因为字典顺序导致可能的生成翻译遗漏
* 重新实现 Rust 中的 C++ 字符串操作，移除 `cxx` crate
* 添加物品名通配符匹配
* 添加植物名称和部位的翻译（植物材料如树叶等还没有翻译）
* 提高了游戏启动速度（字体加载速度）

### 20240908 汉化预览版

* **项目移动到 Gitee 平台托管，分离配置和词典用独立的仓库管理**
* 部分修复了下层文本未被遮盖的问题
* 修复了因字符渲染时缓冲区超界引起的游戏崩溃
* 分离了部分词典以支持文本匹配和未来的翻译上下文支持
* 实现了用于匹配文本的状态机和使用 BFS 进行以单词为单位的文本匹配
* 添加了技能文本匹配和翻译
* 添加了大部分工坊中配方的描述（物品翻译和匹配完善后重做这块）
* 添加了顶级词典用于尽可能淘汰旧的 dfint 词典以提供更好的翻译
* 添加了教程和帮助的标题、内容（富文本）、按钮、任务项目文本的词典
* 稍微改进了下性能

### 20240901 汉化预览版

* **增加了富文本排版**
* hook 窗口大小变动的函数在 Linux 和 Windows 平台统一使用 `gps_allocate`
* 使用 `bitflags` 包管理一些 enum
* 删除 `erasescreen` 函数的 hook，统一在完整绘制后清空缓冲层（修复文本渲染重叠的问题）
* 修正文本在渲染后会有一个多余的空格的问题
* 使用 `fontdue` 包替换 `cosmic-text`，以提高渲染效率和支持多行文本排版、中英文混排（代价是启动慢了点）
* 增加中英文混排、和 CP437 和 UTF-8 互相转换的逻辑，修复有些符号不能正常渲染（如性别符号和一些西欧字符的渲染），同时修复因为之前 CP437 强制转换 UTF-8 导致的缺字并在渲染时崩溃的问题
* 重构整个项目，增加多行富文本排版（目前 Windows 仍有键位名称无法渲染导致崩溃的 bug，暂时已对 Windows 平台禁用相关逻辑，可以使用 Ctrl+F2 暂时切回英文查看按键）
* 字典增加了教程部分的翻译（为了展示富文本排版，我手动翻译的）

### 20240825 汉化预览版

* **首次发布**
* 正确渲染矢量字体
* 独立的屏幕文本管理和渲染层
* 可开关翻译
* 使用 dfint 词典
* 适配 Windows 的 itch 和 steam 版本（有一些未解决的问题）
